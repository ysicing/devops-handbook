{"./":{"url":"./","title":"序言","keywords":"","body":"DevOps运维指南/云原生实践手册 开始之前 在阅读本书之前希望您掌握以下知识和准备以下环境： Debian 常用命令 Docker 基本操作 Mac/Linux 皆可 系列主题 Kubernetes(1.17+)实践 Go(1.12+)开发实践 运维实践(主要是基于Debian发行版) Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "},"kubernetes/install/":{"url":"kubernetes/install/","title":"安装篇","keywords":"","body":"安装 推荐使用sealos, 一键高可用，简单上手 准备工作 虚拟机 环境: 3台机器(debian/buster, 4.19.0-6-amd64, 172.20.0.101~172.20.0.103, 2核4G80G存储) mkdir k8s && cd k8s wget https://ysicing.me/hack/vm/Vagrantfile vagrant up 初始化环境 docker pull ysicing/ansible docker run -it --rm ysicing/ansible bash cp inventory.ini.example inventory.ini # 初始化系统,安装docker ansible-playbook all.yml exit 安装k8s 源码编译安装sealos,使用新特性 git clone https://github.com/fanux/sealos.git --depth 1 make local mv sealos /usr/local/bin/ 下载离线包定制离线包 wget https://sealyun.oss-cn-beijing.aliyuncs.com/413bd3624b2fb9e466601594b4f72072-1.17.0/kube1.17.0.tar.gz tar xf kube1.17.0.tar.gz 定制后的脚本，我移除了镜像和二进制文件,需要自己二次集成，下载路径install.tgz # 安装1master2worker sealos init --passwd vagrant --podcidr 192.168.0.0/16 --repo registry.cn-hangzhou.aliyuncs.com/google_containers --master 172.20.0.101 --node 172.20.0.102 --node 172.20.0.103 --version 1.17.0 --pkg-url /root/kube1.17.0.tar.gz # 清除 sealos clean --passwd vagrant --master 172.20.0.101 --node 172.20.0.102 --node 172.20.0.103 特别说明node节点需要指定路由，否则会安装失败,fanux/sealos#134 route add default gw 172.20.0.1 # 最后修改hosts 172.20.0.101 apiserver.cluster.local Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "},"linux/":{"url":"linux/","title":"Linux","keywords":"","body":"Linux姿势 linux management note Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "},"linux/linux.html":{"url":"linux/linux.html","title":"Debian使用技巧","keywords":"","body":"Linux 快速启动一个Debian环境 Debian 9.11 vagrant init ysicing/debian --box-version 9.11.0 vagrant up Debian 10.2 vagrant init ysicing/debian vagrant up 源码 构建box源码 debian-vagrant Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "},"linux/init.html":{"url":"linux/init.html","title":"初始化","keywords":"","body":"初始化Debian 基础环境配置和安装docker配置 操作 git clone https://github.com/ysicing/play-ansible.git cd play-ansible # 安装ansible,可跳过 ./install.sh # 配置初始化机器 cp inventory.ini.example inventory.ini # 执行初始化 ansible-playbook init.yml 或者参考 k8s安装部分 容器化方式初始化 Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "},"linux/reinstall.html":{"url":"linux/reinstall.html","title":"在线重装","keywords":"","body":"在线重装Debian 背景 一条命令快速重装干净的Linux环境 目前仅支持Debian(不会不打算支持其他系统) 基于萌咖大佬的二次魔改 默认做了 默认root密码 vagrant(安装完成建议修改，禁止密码登录) 默认配置源为mirrors.tuna.tsinghua.edu.cn,默认添加了security,backports 默认时区为Asia/Shanghai 默认安装了curl wget openssh-server sudo sed apt-transport-https net-tools等常用工具 同时默认支持自定义密码 安装 curl -sSL https://ysicing.me/hack/reinstall/install.sh | bash # 指定参数 bash 自定义硬盘 存在多个硬盘时，需要下载 https://ysicing.me/hack/reinstall/installhk.sh文件，编辑如下部分即可 d-i partman-auto/disk string /dev/sdb 参考附录 [ Linux VPS ] Debian/Ubuntu/CentOS 网络安装/重装系统/纯净安装 一键脚本 Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "},"linux/faq.html":{"url":"linux/faq.html","title":"FAQ","keywords":"","body":"FAQ docker npm安装问题 npm config set unsafe-perm true git操作 # 改崩了 git fetch --all git reset --hard origin/master # 放弃本地全部/单个 git checkout . git checkout -- filename Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "},"storage/storage.html":{"url":"storage/storage.html","title":"存储","keywords":"","body":"存储 主要介绍常用存储安装使用 Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "},"storage/nfs.html":{"url":"storage/nfs.html","title":"NFS","keywords":"","body":"NFS存储 Debian # 安装 apt update apt install -y nfs-kernel-server # 配置 mkdir /k8sdata echo \"/k8sdata/ *(insecure,rw,sync,no_root_squash,no_subtree_check)\" > /etc/exports # 启动nfs systemctl enable rpcbind systemctl enable nfs-server systemctl start rpcbind systemctl start nfs-server exportfs -r # 测试 showmount -e 127.0.0.1 CentOS # 安装nfs yum install -y nfs-utils # 配置共享目录 mkdir /k8sdata echo \"/k8sdata *(insecure,rw,sync,no_root_squash)\" > /etc/exports # 启动nfs systemctl enable rpcbind systemctl enable nfs-server systemctl start rpcbind systemctl start nfs-server exportfs -r # 测试 showmount -e 127.0.0.1 Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "},"docker/":{"url":"docker/","title":"docker","keywords":"","body":"docker使用 不会特别强调docker具体使用 docker快速安装 curl -fsSL https://ysicing.me/hack/docker/install.sh | bash 做了如下设置 { \"registry-mirrors\": [\"https://dockerhub.azk8s.cn\",\"https://reg-mirror.qiniu.com\"], \"bip\": \"172.30.42.1/16\", \"max-concurrent-downloads\": 10, \"log-driver\": \"json-file\", \"log-level\": \"warn\", \"log-opts\": { \"max-size\": \"20m\", \"max-file\": \"2\" }, \"storage-driver\": \"overlay2\" } docker常用工具安装 docker run --rm -v /usr/local/bin:/sysdir ysicing/tools tar zxf /pkg.tgz -C /sysdir 内置了 etcdctl helm(v3) docker-compose calicoctl ctop cclear (清理退出容器) din (进入容器 din cid> ash/bash(默认)/sh) dps (容器状态) etcdcli (特别支持k8s集群的etcd) kbtoken (查看kuboard admin用户token) kdtoken (查看dashboard-admin 用户token) Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "},"appendix/":{"url":"appendix/","title":"附录说明","keywords":"","body":"附录说明 用于记录发现的有用/有趣的Github项目 20191219 book prometheus 20191208 kubewatch Watch k8s events and trigger Handlers Go 20191121 overlay networking tool slackhq/nebula 20191104 KubeOperator 一键部署和管理生产级别的 Kubernetes 集群 20191010 Status Page statusfy NodeJS 20191009 Status Page statping Go 20191006 iptv 20190927 Collection of Prometheus alerting rules 20190926 listen1 听歌神器 20190925 一个基于Go的Telegram RSS Bot机器人，支持应用内阅读预览 kubernetes app kubeapp 20190924 octant k8s Go 20190920 gopub 发布系统(不维护) PrometheusAlert Go 20190919 felix SSH and RESTful scaffold for Backend and DevOps engineers Go kplcloud基于Kubernetes的应用管理平台 Go Git服务webhook Go 20190916 &#x1F575;️‍♀️ 监视我的手机：数据都去哪儿了？ Python 20190915 &#x1F36D; 集合多家 API 的新一代图床auxpi Go 20190913 TeaWeb-可视化的Web代理服务 Go 20190912 SmartPing 一款开源、高效、便捷的网络质量监控神器！Go 20190911 Mysql web端sql审核平台Yearning Go 简单可信赖的任务管理工具 Go 20190908 Linux透明代理 运维管理平台flask Python 20190906 kubernetes高可用安装工具sealos GO 基于Vue框架构建的github数据可视化平台GitDataV VUE 20190904 nging 基于caddy的网站服务程序，带图形化管理界面 20190903 Aria2-AriaNg-X docker-compose 20190823 trivy 容器的简单而全面的漏洞扫描程序 Go 20190813 anytunnel 开源内网穿透商用平台系统 Go 扩展企业安全测试主动诱导型蜜罐框架系统 Go Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "},"appendix/macOS-apps.html":{"url":"appendix/macOS-apps.html","title":"macOS常用工具","keywords":"","body":"macOS 常用工具 个人常用工具列表 iTerm2(终端) Sourcetree(git工具) Dash(文档工具) iHosts(hosts编辑器) Microsoft To Do(Todo) pap.er(壁纸) ZeroTier(内网穿透) Xmind Pixiu(记账) Copyright © 2019 | 仅供学习参考,不可用于其他途径. all right reserved，powered by Gitbook Updated at 2019-12-24 00:00:52 "}}